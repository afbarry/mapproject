<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Candidate Tracker</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css' rel='stylesheet' />
<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.css' rel='stylesheet' />
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.Default.css' rel='stylesheet' />

<center><div id='map'></div></center>
<div id='map-overlay-hawaii'></div>
<div id='map-overlay-alaska'></div>

<style>
  body { margin:0; padding:0; }
  #map { 
      position:absolute; 
      top:0; 
      bottom:0; 
      width:90%; 
      height:90%;
      border:1px solid #000;
  }
  #map-overlay-hawaii {
      position:absolute;
      left:10px;
      bottom:135px;
      width:200px;
      height:150px;
      border:1px solid #fff;
  }
  #map-overlay-alaska {
      position:absolute;
      left:10px;
      bottom:300px;
      width:200px;
      height:150px;
      border:1px solid #fff;
  }
</style>

<script>
L.mapbox.accessToken = 'pk.eyJ1IjoibWFwYm94IiwiYSI6IjZjNmRjNzk3ZmE2MTcwOTEwMGY0MzU3YjUzOWFmNWZhIn0.Y8bhBaUMqFiPrDRW9hieoQ';
var mapid = 'abarry.4cb335dc';
var overlayOptions = {
    zoomControl: false,
    attributionControl: false
};

var map = L.mapbox.map('map', mapid)
    .fitBounds([[22.917922936146045,-127.265625],[50.28933925329178,-64.3359375]]);

var mapOverlayHawaii = L.mapbox.map('map-overlay-hawaii', mapid, overlayOptions)
    .fitBounds([[18.542116654448996,-161.03759765625],[22.573438264572406,-154.22607421875]]);

var mapOverlayAlaska = L.mapbox.map('map-overlay-alaska', mapid, overlayOptions)
    .fitBounds([[51.72702815704774,-170.15625],[71.85622888185527,-127.61718749999999]]);


var featureLayer = L.mapbox.featureLayer('https://raw.githubusercontent.com/afbarry/mapproject.js/master/newnew.geojson').on('ready', function(e) {
    
    featureLayer.eachLayer(function(layer) {

    var content = "<b>Candidate</b><br>" + layer.feature.properties.candidate + "<b><br>Event</b><br> " + layer.feature.properties.name + "<br><b>Location</b><br>" + layer.feature.properties.place + " <br> " + layer.feature.properties.address + " - " + layer.feature.properties.city + ", " + layer.feature.properties.state;
    layer.bindPopup(content);
});


    var clusterGroup = new L.MarkerClusterGroup();
    e.target.eachLayer(function(layer) {
        clusterGroup.addLayer(layer);
    });
    map.addLayer(clusterGroup);
});



</script>
</body>
</html>

